(this["webpackJsonpshopping-list"]=this["webpackJsonpshopping-list"]||[]).push([[0],{59:function(e,t,n){e.exports=n(71)},64:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(13),r=n.n(c),i=(n(64),n(18)),l=n(99),u=n(100),d=n(101),s=n(31),m=n(45),p=n.n(m),f=n(97),h=n(102),g=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),v=function(e){var t=g();return o.a.createElement("div",{className:t.root},o.a.createElement(l.a,{position:"static"},o.a.createElement(u.a,null,o.a.createElement(d.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(p.a,null)),o.a.createElement(s.a,{variant:"h6",color:"inherit",className:t.title},"Shopping"),o.a.createElement(s.a,{color:"inherit"},e.connected?"Connected":"Connecting"),o.a.createElement(h.a,{color:"inherit"},"Login"))))},E=Object(i.b)((function(e){return{connected:e.socketio.connected}}))(v),k=n(109),b=n(112),y=n(103),I=n(104),w=function(e){var t=e.value,n=e.checked,a=e.onClick;e.onEdit;return o.a.createElement(b.a,{role:void 0,button:!0},o.a.createElement(y.a,null,o.a.createElement(k.a,{edge:"start",tabIndex:-1,checked:n,onChange:a})),o.a.createElement(I.a,{primary:t}))},O=n(105),j=n(110),S=n(46),A=n.n(S),x=Object(f.a)((function(e){return{list:{listStyleType:"none",padding:0},root:{width:"100%",backgroundColor:e.palette.background.paper}}})),C=function(e){var t=e.items,n=e.onItemClick,a=e.onItemEdit,c=e.onItemAdd,r=x();return o.a.createElement(O.a,{className:r.root},o.a.createElement(b.a,{role:void 0},o.a.createElement(y.a,null,o.a.createElement(A.a,null)),o.a.createElement(j.a,{placeholder:"Add Item",disableUnderline:!0,onKeyDown:function(e){"Enter"===e.key&&(c(e.currentTarget.value),e.currentTarget.value="")}})),t.list.map((function(e){var c=t.items[e];return o.a.createElement(w,{key:c.id,checked:c.checked,value:c.value,onClick:function(e,t){return n(c.id,t)},onEdit:function(e){return a(c.id,e.target.value)}})})))},N=n(16),B=n(111),T=function(){return(new Date).toISOString()},W={list:[],items:{},updated:(new Date).toISOString()},D=Object(N.b)({name:"items",initialState:W,reducers:{addItem:{reducer:function(e,t){var n=t.payload,a=n.id,o=n.value,c=n.updated,r=n.created;e.items[a]={id:a,value:o,checked:!1,created:r},e.list.push(a),e.updated=c},prepare:function(e){return{payload:{id:Object(B.a)(),updated:T(),value:e,created:T(),meta:{send:!0}}}}},editItem:{reducer:function(e,t){var n=t.payload,a=n.id,o=n.value,c=n.updated;e.items[a].value=o,e.updated=c},prepare:function(e,t){return{payload:{id:e,updated:T(),value:t,meta:{send:!0}}}}},toggleItem:{reducer:function(e,t){var n=t.payload,a=n.id,o=n.checked,c=n.updated;e.items[a].checked=o,e.updated=c},prepare:function(e,t){return{payload:{id:e,checked:t,updated:T(),meta:{send:!0}}}}},replaceAll:function(e,t){e.items=t.payload.items,e.list=t.payload.list,e.updated=t.payload.updated}}}),G=D.actions,J=G.addItem,L=G.editItem,M=G.toggleItem,R=G.replaceAll,q=D.reducer,z=Object(i.b)((function(e){return{items:e.items}}),(function(e){return{onItemClick:function(t,n){e(M(t,n))},onItemAdd:function(t){e(J(t))},onItemEdit:function(t,n){e(L(t,n))}}}))(C),K=n(108),U=n(73),$=n(50),F=n(106),H=n(107),P=Object(f.a)((function(e){return{content:{marginTop:50}}})),Q=Object($.a)({palette:{type:"dark"}});var V=function(){var e=P();return o.a.createElement(F.a,{theme:Q},o.a.createElement(H.a,null),o.a.createElement(E,null),o.a.createElement(K.a,{maxWidth:"sm"},o.a.createElement(U.a,{className:e.content,elevation:1},o.a.createElement(z,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(15),Y=n(9),Z=Object(N.b)({name:"socketio",initialState:{connected:!1},reducers:{connected:function(e,t){e.connected=!0},reconnecting:function(e,t){e.connected=!1}}}),_=Z.actions,ee=(_.connected,_.reconnecting,Z.reducer),te=Object(Y.c)({items:q,socketio:ee}),ne=n(47),ae=n(36),oe=n.n(ae),ce=n(48),re=n(17),ie=n.n(re),le=n(49),ue=function(e){return function(t){var n=new le.Socket("ws://192.168.1.157:4000/socket");n.connect();var a=n.channel("shoppinglist",{});return a.join().receive("ok",function(){var t=Object(ce.a)(oe.a.mark((function t(n){var o;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie.a.getItem("unsentActions");case 2:if(!(o=t.sent)){t.next=7;break}return o.forEach((function(e){console.log("send",e),a.push(e.type,e)})),t.next=7,ie.a.setItem("unsentActions",[]);case 7:e.dispatch({type:"socketio/connected"}),console.log("Request the state"),a.push("items/fullList",{}).receive("ok",(function(t){console.log(t),e.dispatch(R(t))}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).receive("error",(function(e){console.log("Something went wrong",e)})),a.onError((function(t){e.dispatch({type:"socketio/reconnecting"})})),a.on("items/toggleItem",(function(t){console.log(t),t.payload.meta.send=!1,e.dispatch(t)})),a.on("items/addItem",(function(t){console.log(t),t.payload.meta.send=!1,e.dispatch(t)})),a.on("items/editItem",(function(t){console.log(t),t.payload.meta.send=!1,e.dispatch(t)})),function(n){var o,c;return(null===n||void 0===n||null===(o=n.payload)||void 0===o||null===(c=o.meta)||void 0===c?void 0:c.send)&&(e.getState().socketio.connected?a.push(n.type,n):(console.log("We lost this :("),ie.a.getItem("unsentActions").then((function(e){console.log("Adding",e),null===e&&(e=[]),e.push(n),ie.a.setItem("unsentActions",e)})))),t(n)}}},de={key:"supplies",storage:ie.a},se=Object(X.g)(de,te),me=Object(N.a)({reducer:se,middleware:Object(N.c)({serializableCheck:{ignoredActions:[X.a,X.f,X.b,X.c,X.d,X.e]}}).concat(ue)}),pe=Object(X.h)(me);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(i.a,{store:me},o.a.createElement(ne.a,{persistor:pe},o.a.createElement(V,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.1779e851.chunk.js.map